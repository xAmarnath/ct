<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="CloudTorrent - Modern Torrent & Download Manager" />
    <title>CloudTorrent</title>
    <link type="image/png" sizes="32x32" rel="icon" href="https://img.icons8.com/fluency/48/cloud-download.png" />
    <link rel="stylesheet" href="/static/css/style.css" />
</head>

<body>
    <!-- Main Navigation -->
    <nav class="main-nav">
        <div class="nav-container">
            <a href="/" class="logo">
                <div class="logo-icon">
                    <i class="bi bi-cloud-arrow-down-fill"></i>
                </div>
                <span class="logo-text">CloudTorrent</span>
            </a>

            <div class="nav-tabs" id="main-tabs">
                <a href="#torrents" class="nav-tab active" data-tab="torrents">
                    <i class="bi bi-magnet"></i>
                    Torrents
                    <span class="badge" id="torrent-count">0</span>
                </a>
                <a href="#downloads" class="nav-tab" data-tab="downloads" id="aria2-tab">
                    <i class="bi bi-download"></i>
                    Downloads
                    <span class="badge" id="download-count">0</span>
                </a>
                <a href="#conversions" class="nav-tab" data-tab="conversions" id="ffmpeg-tab">
                    <i class="bi bi-film"></i>
                    Convert
                </a>
                <a href="/downloads/" class="nav-tab" data-tab="files">
                    <i class="bi bi-folder2-open"></i>
                    Files
                </a>
                <a href="/search" class="nav-tab">
                    <i class="bi bi-search"></i>
                    Search
                </a>
            </div>

            <div class="nav-actions">
                <span class="feature-badge active" id="torrent-status">
                    <i class="bi bi-circle-fill"></i> Torrent
                </span>
                <span class="feature-badge inactive" id="aria2-status">
                    <i class="bi bi-circle-fill"></i> Aria2
                </span>
                <span class="feature-badge inactive" id="ffmpeg-status">
                    <i class="bi bi-circle-fill"></i> FFmpeg
                </span>
            </div>
        </div>
    </nav>

    <!-- Main Container -->
    <main class="main-container">
        <!-- System Stats -->
        <div class="stats-bar" id="system-stats">
            <div class="stat-item">
                <span class="stat-label">CPU</span>
                <span class="stat-value" id="stat-cpu">-</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Memory</span>
                <span class="stat-value" id="stat-mem">-</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Disk</span>
                <span class="stat-value" id="stat-disk">-</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">System</span>
                <span class="stat-value" id="stat-os">-</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Active Downloads</span>
                <span class="stat-value" id="stat-downloads">0</span>
            </div>
        </div>

        <!-- Torrents Tab -->
        <div class="tab-content active" id="tab-torrents">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="bi bi-magnet-fill"></i>
                    Torrent Manager
                </h2>
                <div class="control-group">
                    <button class="btn btn-secondary btn-sm" onclick="startAll()">
                        <i class="bi bi-play-fill"></i> Start All
                    </button>
                    <button class="btn btn-secondary btn-sm" onclick="stopAll()">
                        <i class="bi bi-pause-fill"></i> Stop All
                    </button>
                    <button class="btn btn-danger btn-sm" onclick="removeAll()">
                        <i class="bi bi-trash3"></i> Clear All
                    </button>
                </div>
            </div>

            <div class="input-group-neon">
                <input type="text" class="input-neon" id="magnet-input" 
                       placeholder="magnet:?xt=urn:btih:... or paste torrent link" />
                <select class="select-input" id="torrent-engine">
                    <option value="rain">Rain</option>
                    <option value="aria2">Aria2</option>
                </select>
                <button class="btn btn-primary" onclick="addTorrent()">
                    <i class="bi bi-plus-lg"></i> Add
                </button>
            </div>

            <div class="item-list" id="torrent-list">
                <div class="empty-state">
                    <i class="bi bi-magnet"></i>
                    <h3>No Active Torrents</h3>
                    <p>Paste a magnet link above to start downloading</p>
                </div>
            </div>
        </div>

        <!-- Downloads Tab (Aria2) -->
        <div class="tab-content" id="tab-downloads">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="bi bi-cloud-arrow-down-fill"></i>
                    Direct Downloads
                </h2>
                <div class="control-group">
                    <button class="btn btn-secondary btn-sm" onclick="pauseAllAria2()">
                        <i class="bi bi-pause-fill"></i> Pause All
                    </button>
                    <button class="btn btn-secondary btn-sm" onclick="resumeAllAria2()">
                        <i class="bi bi-play-fill"></i> Resume All
                    </button>
                </div>
            </div>

            <div class="input-group-neon">
                <input type="text" class="input-neon" id="url-input" 
                       placeholder="https://example.com/file.zip - Direct download URL" />
                <button class="btn btn-primary" onclick="addDownload()">
                    <i class="bi bi-plus-lg"></i> Add Download
                </button>
            </div>

            <div id="aria2-unavailable" class="empty-state">
                <i class="bi bi-exclamation-triangle"></i>
                <h3>Aria2 Not Available</h3>
                <p>Install aria2 to enable direct download features</p>
            </div>

            <div class="item-list" id="download-list"></div>
        </div>

        <!-- Conversions Tab (FFmpeg) -->
        <div class="tab-content" id="tab-conversions">
            <div class="section-header">
                <h2 class="section-title">
                    <i class="bi bi-film"></i>
                    Video Conversion Queue
                </h2>
            </div>

            <div id="ffmpeg-unavailable" class="empty-state">
                <i class="bi bi-exclamation-triangle"></i>
                <h3>FFmpeg Not Available</h3>
                <p>Install FFmpeg to enable video conversion features</p>
            </div>

            <div class="item-list" id="conversion-list"></div>
        </div>
    </main>

    <!-- Toast Container -->
    <div class="toast-container" id="toast-container"></div>

    <!-- File Details Modal -->
    <div class="modal-overlay" id="file-modal">
        <div class="modal-content glass-card">
            <div class="modal-header">
                <h3 id="modal-title">Torrent Files</h3>
                <button class="btn btn-ghost btn-icon" onclick="closeModal()">
                    <i class="bi bi-x-lg"></i>
                </button>
            </div>
            <div class="modal-body" id="modal-body">
                <!-- Dynamic content -->
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal()">Close</button>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="/static/js/ws.js"></script>
    <script src="/static/js/addons.js"></script>
    <script src="/static/js/torr.js"></script>
    <script src="/static/js/arigojs"></script>
    <script src="/static/js/ffmpeg.js"></script>
</body>

</html>